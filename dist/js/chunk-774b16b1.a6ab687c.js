(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-774b16b1"],{"05dc":function(t,e,n){},"11e9":function(t,e,n){var o=n("52a7"),a=n("4630"),c=n("6821"),i=n("6a99"),r=n("69a8"),s=n("c69a"),m=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?m:function(t,e){if(t=c(t),e=i(e,!0),s)try{return m(t,e)}catch(n){}if(r(t,e))return a(!o.f.call(t,e),t[e])}},3846:function(t,e,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"3b2b":function(t,e,n){var o=n("7726"),a=n("5dbc"),c=n("86cc").f,i=n("9093").f,r=n("aae3"),s=n("0bfb"),m=o.RegExp,l=m,u=m.prototype,d=/a/g,f=/a/g,p=new m(d)!==d;if(n("9e1e")&&(!p||n("79e5")((function(){return f[n("2b4c")("match")]=!1,m(d)!=d||m(f)==f||"/a/i"!=m(d,"i")})))){m=function(t,e){var n=this instanceof m,o=r(t),c=void 0===e;return!n&&o&&t.constructor===m&&c?t:a(p?new l(o&&!c?t.source:t,e):l((o=t instanceof m)?t.source:t,o&&c?s.call(t):e),n?this:u,m)};for(var h=function(t){t in m||c(m,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},v=i(l),g=0;v.length>g;)h(v[g++]);u.constructor=m,m.prototype=u,n("2aba")(o,"RegExp",m)}n("7a56")("RegExp")},"4d40":function(t,e,n){},"5dbc":function(t,e,n){var o=n("d3f4"),a=n("8b97").set;t.exports=function(t,e,n){var c,i=e.constructor;return i!==n&&"function"==typeof i&&(c=i.prototype)!==n.prototype&&o(c)&&a&&a(t,c),t}},"5fd0":function(t,e,n){"use strict";var o=n("4d40"),a=n.n(o);a.a},"6b54":function(t,e,n){"use strict";n("3846");var o=n("cb7c"),a=n("0bfb"),c=n("9e1e"),i="toString",r=/./[i],s=function(t){n("2aba")(RegExp.prototype,i,t,!0)};n("79e5")((function(){return"/a/b"!=r.call({source:"a",flags:"b"})}))?s((function(){var t=o(this);return"/".concat(t.source,"/","flags"in t?t.flags:!c&&t instanceof RegExp?a.call(t):void 0)})):r.name!=i&&s((function(){return r.call(this)}))},"6b58":function(t,e,n){},8530:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapp",staticStyle:{width:"100%"}},[n("h1",{staticClass:"loadingtext"},[n("span",[t._v("加")]),n("span",[t._v("载")]),n("span",[t._v("数")]),n("span",[t._v("据")]),n("span",[t._v("中")]),n("span",[t._v("...")])])])}],c={},i=c,r=(n("5fd0"),n("2877")),s=Object(r["a"])(i,o,a,!1,null,"3789c4c2",null);e["a"]=s.exports},"8b97":function(t,e,n){var o=n("d3f4"),a=n("cb7c"),c=function(t,e){if(a(t),!o(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,o){try{o=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),o(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,n){return c(t,n),e?t.__proto__=n:o(t,n),t}}({},!1):void 0),check:c}},9093:function(t,e,n){var o=n("ce10"),a=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return o(t,a)}},a481:function(t,e,n){"use strict";var o=n("cb7c"),a=n("4bf8"),c=n("9def"),i=n("4588"),r=n("0390"),s=n("5f1b"),m=Math.max,l=Math.min,u=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,h){return[function(o,a){var c=t(this),i=void 0==o?void 0:o[e];return void 0!==i?i.call(o,c,a):n.call(String(c),o,a)},function(t,e){var a=h(n,t,this,e);if(a.done)return a.value;var u=o(t),d=String(this),f="function"===typeof e;f||(e=String(e));var g=u.global;if(g){var b=u.unicode;u.lastIndex=0}var _=[];while(1){var x=s(u,d);if(null===x)break;if(_.push(x),!g)break;var C=String(x[0]);""===C&&(u.lastIndex=r(d,c(u.lastIndex),b))}for(var w="",y=0,$=0;$<_.length;$++){x=_[$];for(var L=String(x[0]),E=m(l(i(x.index),d.length),0),S=[],k=1;k<x.length;k++)S.push(p(x[k]));var O=x.groups;if(f){var j=[L].concat(S,E,d);void 0!==O&&j.push(O);var M=String(e.apply(void 0,j))}else M=v(L,d,E,S,O,e);E>=y&&(w+=d.slice(y,E)+M,y=E+L.length)}return w+d.slice(y)}];function v(t,e,o,c,i,r){var s=o+t.length,m=c.length,l=f;return void 0!==i&&(i=a(i),l=d),n.call(r,l,(function(n,a){var r;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,o);case"'":return e.slice(s);case"<":r=i[a.slice(1,-1)];break;default:var l=+a;if(0===l)return n;if(l>m){var d=u(l/10);return 0===d?n:d<=m?void 0===c[d-1]?a.charAt(1):c[d-1]+a.charAt(1):n}r=c[l-1]}return void 0===r?"":r}))}}))},a7fe:function(t,e,n){"use strict";var o={scroll:function(t){window.onscroll=function(){function e(){var t=0,e=0,n=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(n=document.documentElement.scrollTop),t=e-n>0?e:n,t}function n(){var t=0,e=0,n=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(n=document.documentElement.scrollHeight),t=e-n>0?e:n,t}function o(){var t=0;return t="CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight,t}e()+o()>=n()-5&&t()}}};e["a"]=o},f356:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"comvue"}},[n("div",{ref:"comments",attrs:{id:"comments"}},[n("h2",[t._v("\n      # 评论\n      "),n("span",{staticStyle:{color:"red","font-size":"16px","padding-left":"10px"}},[t._v(t._s(t.alert))])]),n("div",[t.islogin?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.author,expression:"comment.author"}],staticClass:"comment-input",attrs:{type:"text",placeholder:"昵称*"},domProps:{value:t.comment.author},on:{input:function(e){e.target.composing||t.$set(t.comment,"author",e.target.value)}}}),t.islogin?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.mail,expression:"comment.mail"}],staticClass:"comment-input",attrs:{type:"email",placeholder:"邮箱*"},domProps:{value:t.comment.mail},on:{input:function(e){e.target.composing||t.$set(t.comment,"mail",e.target.value)}}}),t.islogin?t._e():n("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.url,expression:"comment.url"}],staticClass:"comment-input",attrs:{type:"text",placeholder:"网址"},domProps:{value:t.comment.url},on:{input:function(e){e.target.composing||t.$set(t.comment,"url",e.target.value)}}}),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.text,expression:"comment.text"}],attrs:{name:"content",id:"comment-content",placeholder:t.placetxt},domProps:{value:t.comment.text},on:{input:function(e){e.target.composing||t.$set(t.comment,"text",e.target.value)}}}),n("button",{attrs:{id:"pushCom"},on:{click:t.pushCom}},[t._v(t._s(t.pushComtxt))])])]),n("div",{ref:"commentsList",attrs:{id:"commentsList"}},[t._l(t.comments,(function(t){return n("div",[n("CommentItem",{attrs:{commentsList:t}})],1)})),t.getComplete?t._e():n("Load")],2)])},a=[],c=(n("3b2b"),n("1bab")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"comment even thread-even depth-1"},[n("div",{staticClass:"comment-body"},[n("div",{staticClass:"comment-author vcard"},[n("img",{staticClass:"avatar avatar-32 photo",attrs:{alt:"",src:"https://cdn.v2ex.com/gravatar/"+t.commentsList.mailHash+"?s=100&d=mm&r=g",height:"32",width:"32"}}),n("cite",{staticClass:"fn"},[n("a",{staticClass:"url",attrs:{href:t.commentsList.url,rel:"external nofollow",target:"_blank"}},[t._v(t._s(t.commentsList.author))])]),"1"==t.commentsList.authorId?n("span",{staticClass:"admin"},[t._v("博主")]):t._e(),n("span",{staticClass:"says"},[t._v("说道：")])]),n("div",{staticClass:"comment-meta commentmetadata"},[n("a",{staticClass:"com-date"},[t._v(t._s(t.formatDate(t.commentsList.created)))])]),n("p",[t._v(t._s(t.commentsList.text))]),n("div",{staticClass:"reply"},[n("a",{staticClass:"comment-reply-link",attrs:{rel:"nofollow",href:"#comments?pid="+t.commentsList.coid},on:{click:t.scr}},[t._v("回复")])])]),void 0!=t.commentsList.children&&t.commentsList.children.length>0?n("div",{staticClass:"comment-child"},t._l(t.commentsList.children,(function(t){return n("div",[n("Comment",{attrs:{commentsList:t}})],1)})),0):t._e()])},r=[],s=(n("6b54"),n("a481"),{name:"Comment",props:["commentsList"],data:function(){return{}},components:{Comment:Comment},methods:{scr:function(){comments.scrollIntoView()}},computed:{formatDate:function(){function t(t,n){var o=["Y","M","D","h","m","s"],a=[],c=new Date(1e3*t);for(var i in a.push(c.getFullYear()),a.push(e(c.getMonth()+1)),a.push(e(c.getDate())),a.push(e(c.getHours())),a.push(e(c.getMinutes())),a.push(e(c.getSeconds())),a)n=n.replace(o[i],a[i]);return n}function e(t){return t=t.toString(),t[1]?t:"0"+t}return function(e){return t(e,"Y-M-D h:m:s")}}}}),m=s,l=(n("fefa"),n("2877")),u=Object(l["a"])(m,i,r,!1,null,"0a303bcd",null),d=u.exports,f=n("8530"),p=n("a7fe"),h={name:"CommentList",data:function(){return{comments:[],page:1,alert:"",placetxt:"不说几句就不够意思了:)",pushComtxt:"提交评论",comment:{cid:null,parent:null,text:"",author:"",mail:"",url:"",token:""},loadend:!1,getComplete:!1,islogin:!1}},props:["csrfToken"],components:{CommentItem:d,Load:f["a"]},methods:{pushCom:function(){var t=this;this.comment.token=this.$props.csrfToken;var e=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");if(""!=this.comment.mail&&""!=this.comment.author&&""!=this.comment.text||this.islogin){this.alert="";var n=this.comment.mail;if(!this.islogin&&!e.test(n))return this.alert="你输入的不是邮箱",!1;var o=window.location.href.indexOf("pid=");o>-1&&(this.comment.parent=window.location.href.substr(o+4,10)),this.pushComtxt="提交中",Object(c["a"])({method:"post",url:"/api/comment",data:this.comment,withCredentials:!0}).then((function(e){t.pushComtxt="提交评论",t.page=1,t.loadend=!1,t.comments=[],t.getComments(),t.comment.parent=null,t.comment.text="",window.history.pushState({},"","./"+t.comment.cid),"error"==e.status?t.alert=e.message:(t.alert="评论成功",t.placetxt="不说几句就不够意思了:)")})).catch((function(e){t.alert="评论过于频繁，请稍后再试"}))}else this.alert="请确保昵称、邮箱、内容不为空"},getComments:function(){var t=this;this.loadend||(this.loadend=!0,this.getComplete=!1,Object(c["a"])({url:"/api/comments?cid="+this.comment.cid+"&page="+this.page}).then((function(e){t.comments=t.comments.concat(e.data.dataSet),e.data.dataSet.length>0&&(t.loadend=!1),t.getComplete=!0})),this.page++)}},created:function(){var t=this;this.comment.cid=this.$route.params.id,this.getComments(),Object(c["a"])({url:"/api/comments?islogin=true",withCredentials:!0}).then((function(e){null!=e.key&&(t.islogin=!0)}))},mounted:function(){var t=this;p["a"].scroll((function(){t.getComments()}))},watch:{$route:function(){window.location.href.indexOf("#comments")>=0?this.placetxt="回复它：":(this.comment.cid=this.$route.params.id,this.page=1,this.loadend=!1,this.comments=[],this.getComments())}}},v=h,g=(n("fc6b"),Object(l["a"])(v,o,a,!1,null,"2843f555",null));e["a"]=g.exports},fc6b:function(t,e,n){"use strict";var o=n("05dc"),a=n.n(o);a.a},fefa:function(t,e,n){"use strict";var o=n("6b58"),a=n.n(o);a.a}}]);
//# sourceMappingURL=chunk-774b16b1.a6ab687c.js.map